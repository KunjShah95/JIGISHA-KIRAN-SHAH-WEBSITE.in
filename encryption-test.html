<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encryption Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        h1,
        h2 {
            color: #1e40af;
        }

        .container {
            margin-top: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background-color: #1e40af;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <h1>Encryption Test Tool</h1>
    <p>This tool helps verify that the encryption functionality is working correctly before deploying to production.</p>

    <div class="container">
        <div class="form-group">
            <label for="input-text">Text to Encrypt:</label>
            <textarea id="input-text" rows="6">Name: John Doe
Phone: 9876543210
Email: john@example.com
Age: 35
Interest: Life Insurance
Income: 5-10 Lakhs</textarea>
        </div>

        <button id="encrypt-btn">Encrypt Data</button>

        <div class="form-group" style="margin-top: 30px;">
            <h2>Results:</h2>
            <div id="result">
                <h3>Original Text:</h3>
                <pre id="original-text"></pre>

                <h3>Encryption Key:</h3>
                <pre id="encryption-key"></pre>

                <h3>Encrypted Text:</h3>
                <pre id="encrypted-text"></pre>

                <h3>Decrypted Text (Verification):</h3>
                <pre id="decrypted-text"></pre>
            </div>
        </div>
    </div>

    <script>
        // Simple encryption for data protection
        function encryptData(data, key) {
            // This is an enhanced XOR encryption with multiple passes
            let encrypted = '';

            // First pass: XOR with key
            for (let i = 0; i < data.length; i++) {
                encrypted += String.fromCharCode(data.charCodeAt(i) ^ key.charCodeAt(i % key.length));
            }

            // Second pass: Add another layer of obfuscation by shifting characters
            let secondPass = '';
            for (let i = 0; i < encrypted.length; i++) {
                const charCode = encrypted.charCodeAt(i);
                secondPass += String.fromCharCode((charCode + 7) % 65536); // Simple shift with wrap-around
            }

            // Final pass: Base64 encode for safe transmission
            return btoa(secondPass);
        }

        // Decrypt function for verification purposes
        function decryptData(encryptedBase64, key) {
            try {
                // Decode the Base64
                const secondPass = atob(encryptedBase64);

                // Undo the character shift
                let firstPass = '';
                for (let i = 0; i < secondPass.length; i++) {
                    const charCode = secondPass.charCodeAt(i);
                    // Undo the shift (need to add 65536 first to handle negative values after modulo)
                    firstPass += String.fromCharCode((charCode - 7 + 65536) % 65536);
                }

                // Undo the XOR with key
                let decrypted = '';
                for (let i = 0; i < firstPass.length; i++) {
                    decrypted += String.fromCharCode(firstPass.charCodeAt(i) ^ key.charCodeAt(i % key.length));
                }

                return decrypted;
            } catch (e) {
                console.error("Decryption error:", e);
                return "Error decrypting data: " + e.message;
            }
        }

        // Generate a unique key
        function generateEncryptionKey() {
            const timestamp = new Date().getTime().toString();
            const randomStr = Math.random().toString(36).substring(2, 15);
            const salt = "JigishaLIC"; // Add a salt for additional security
            return timestamp + randomStr + salt;
        }

        // Handle encryption button click
        document.getElementById('encrypt-btn').addEventListener('click', function () {
            const inputText = document.getElementById('input-text').value;
            const key = generateEncryptionKey();

            // Encrypt the data
            const encrypted = encryptData(inputText, key);

            // For verification, decrypt it back
            const decrypted = decryptData(encrypted, key);

            // Display the results
            document.getElementById('original-text').textContent = inputText;
            document.getElementById('encryption-key').textContent = key;
            document.getElementById('encrypted-text').textContent = encrypted;
            document.getElementById('decrypted-text').textContent = decrypted;
        });
    </script>
</body>

</html>